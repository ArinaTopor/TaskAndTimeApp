<nav class="sidenavbar__container">
    <div>
        <div class="sidenavbar__personal-account">
            <img
                class="sidenavbar__personal-account-icon"
                src="../../../../../assets/icons/personal-account.svg"
                title="personal-account"
            />
            <span class="sidenavbar__personal-account-name">
                {{ (user$ | async)?.displayName }}
            </span>
        </div>

        <ul class="sidenavbar__list">
            <li class="sidenavbar__list-item" *ngFor="let btn of btnList">
                <button
                    class="sidenavbar__list-item-link"
                    [routerLink]="[btn.link]"
                >
                    <img
                        class="sidenavbar__list-item-link-icon"
                        [ngSrc]="btn.icon"
                        width="24"
                        height="24"
                        title="icon"
                    />
                    <span class="sidenavbar__list-item-link-text">{{
                        btn.title
                    }}</span>
                </button>
            </li>
        </ul>

        <hr class="sidenavbar__divider" />
        <div>
            <button
                class="sidenavbar__function-item-link"
                (click)="toggleSection(projectType.project)"
            >
                <span class="sidenavbar__function-item-link-span">
                    <img
                        class="sidenavbar__function-item-link-icon"
                        [ngSrc]="'../../../../../assets/icons/tag-close.svg'"
                        width="16"
                        height="16"
                        title="icon"
                        [ngClass]="{ rotate: showProject }"
                    />
                    <span class="sidenavbar__function-item-link-text"
                        >Проекты</span
                    >
                </span>
                <img
                    class="sidenavbar__function-item-link-icon-two"
                    [ngSrc]="'../../../../../assets/icons/add.svg'"
                    title="icon"
                    width="24"
                    height="24"
                />
            </button>
            <div *ngIf="showProject" class="sidenavbar__function-item-content">
                <ul *ngIf="allProject$ | async as list; else skeleton">
                    <li
                        class="sidenavbar__function-item-content-item"
                        *ngFor="let project of list"
                        [routerLink]="['project/' + project.id]"
                    >
                        <span class="sidenavbar__function-item-link-span">
                            <!-- <img
                                width="20"
                                height="20"
                                title="icon"
                                class="sidenavbar__function-item-content-item-icon"

                            /> -->
                            <span
                                class="sidenavbar__function-item-content-item-name"
                                >{{ project.title }}</span
                            >
                        </span>
                        <settings-tab-popap></settings-tab-popap>
                    </li>
                </ul>
            </div>
        </div>

        <!-- <ul class="sidenavbar__function">
            <li
                class="sidenavbar__function-item"
                *ngFor="let section of sectionList"
            >
                <button
                    class="sidenavbar__function-item-link"
                    (click)="toggleSection(section)"
                >
                    <span class="sidenavbar__function-item-link-span">
                        <img
                            class="sidenavbar__function-item-link-icon"
                            [ngSrc]="
                                '../../../../../assets/icons/tag-close.svg'
                            "
                            width="16"
                            height="16"
                            title="icon"
                            [ngClass]="{ rotate: section.isShow$ | async }"
                        />
                        <span class="sidenavbar__function-item-link-text">{{
                            section.title
                        }}</span>
                    </span>
                    <img
                        class="sidenavbar__function-item-link-icon-two"
                        [ngSrc]="'../../../../../assets/icons/add.svg'"
                        title="icon"
                        width="24"
                        height="24"
                    />
                </button>

                <div
                    *ngIf="section.isShow$ | async"
                    class="sidenavbar__function-item-content"
                >
                    <div *ngIf="section.list$ | async as list; else skeleton">
                        <li
                            class="sidenavbar__function-item-content-item"
                            *ngFor="let project of list"
                        >
                            <span class="sidenavbar__function-item-link-span">
                                <img
                                    *ngIf="project.icon"
                                    [ngSrc]="project.icon"
                                    width="20"
                                    height="20"
                                    title="icon"
                                    class="sidenavbar__function-item-content-item-icon"
                                />
                                <span
                                    class="sidenavbar__function-item-content-item-name"
                                    >{{ project.title }}</span
                                >
                            </span>
                            <settings-tab-popap></settings-tab-popap>
                        </li>
                    </div>
                </div>
            </li>
        </ul> -->

        <ng-template #skeleton>
            <img
                class="sidenavbar__loading"
                [ngSrc]="'../../../../../assets/icons/loading.gif'"
                title="icon"
                width="24"
                height="24"
            />
            <!--
                позже здесь будет нормальный скелетон загрузки, а сейчас почему-то ошибка
                <ngx-skeleton-loader count="5" appearance="circle"></ngx-skeleton-loader>
            -->
        </ng-template>
    </div>

    <div class="sidenavbar__settings">
        <mode-toggle></mode-toggle>
        <div class="sidenavbar__settings-log-out-container">
            <button class="sidenavbar__settings-log-out">
                <img
                    class="sidenav-container-settings-log-out-icon"
                    src="../../../../../assets/icons/logout.svg"
                    title="icon"
                />
                <span
                    class="sidenavbar__settings-log-out-text"
                    (click)="signOut()"
                    >Выход</span
                >
            </button>
        </div>
    </div>
</nav>
